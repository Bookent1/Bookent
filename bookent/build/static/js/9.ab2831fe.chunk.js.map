{"version":3,"sources":["components/addBook/addBook.module.css","components/addBook.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"],"names":["module","exports","Mapp","lazy","NavBar","Footer","AddBook","history","useHistory","useContext","AuthContext","user","setuser","categoryList","useState","addInfo","setaddInfo","Geolatitude","setGeolatitude","Geolongitude","setGeolongitude","closeModal","setCloseModal","err","seterr","addChange","e","target","name","value","useEffect","bookName","description","bookGenere","coverPhoto","time","location","country","owner","username","ownerId","_id","ownerPhone","phone","booksList","JSON","stringify","author","year","isbn","useLayoutEffect","theme","localStorage","getItem","document","documentElement","className","toString","classes","themelight","themedark","main","GeoLA","GeoLO","onClose","container","onSubmit","preventDefault","formData","FormData","i","append","axios","put","process","headers","parse","token","then","res","list","push","data","goBack","catch","response","h2","bookName__div","spans","type","onChange","bookName__input","inputs","required","autoFocus","description__div","description__input","days__div","min","defaultValue","days__input","type__div","type__input","map","book","pattern","maxlength","photo__div","customfileupload","accept","files","style","marginLeft","location__div","mapy","onClick","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","alert","src","alt","height","length","submit__div","submit","cancel","margin","_defineProperty","obj","key","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","apply","_objectSpread2","arguments","source","forEach","getOwnPropertyDescriptors","defineProperties"],"mappings":"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","file":"static/js/9.ab2831fe.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"themelight\":\"addBook_themelight__3AVnv\",\"themedark\":\"addBook_themedark__1CRto\",\"main\":\"addBook_main__3NdrE\",\"mapContainer\":\"addBook_mapContainer__2NFnc\",\"container\":\"addBook_container__IEm_o\",\"h2\":\"addBook_h2__2mYU5\",\"inputs\":\"addBook_inputs__3fm_r\",\"bookName__div\":\"addBook_bookName__div__2KfBL\",\"spans\":\"addBook_spans__33XI6\",\"bookName__input\":\"addBook_bookName__input__bUiya\",\"description__div\":\"addBook_description__div__qxnxP\",\"description__input\":\"addBook_description__input__uo17R\",\"days__div\":\"addBook_days__div__2FOtC\",\"days__input\":\"addBook_days__input__xFHPa\",\"type__div\":\"addBook_type__div__sFugb\",\"type__input\":\"addBook_type__input__1V2zR\",\"photo__div\":\"addBook_photo__div__3yny7\",\"customfileupload\":\"addBook_customfileupload__Zg1HB\",\"location__div\":\"addBook_location__div__1s-Xg\",\"submit__div\":\"addBook_submit__div__1bXFi\",\"submit\":\"addBook_submit__1HN5d\",\"cancel\":\"addBook_cancel__30MZP\",\"err\":\"addBook_err__3eiKz\"};","import { useState, useLayoutEffect, useEffect, useContext, lazy } from 'react';\nimport { useHistory } from 'react-router-dom'\nimport { AuthContext } from '../AuthContext'\nimport axios from 'axios'\nimport classes from './addBook/addBook.module.css';\nconst Mapp = lazy(() => import('./addBook/Map'))\nconst NavBar = lazy(() => import('./favorites/navBar'))\nconst Footer = lazy(() => import('./home/footer'))\n\nfunction AddBook() {\n  const history = useHistory()\n  const { user, setuser, categoryList } = useContext(AuthContext)\n  const [addInfo, setaddInfo] = useState({\n  })\n\n  const [Geolatitude, setGeolatitude] = useState(0);\n  const [Geolongitude, setGeolongitude] = useState(0);\n  const [closeModal, setCloseModal] = useState(true);\n  const [err, seterr] = useState()\n\n  useEffect(() => {\n    setaddInfo({\n      ...addInfo,\n      bookName: '',\n      description: '',\n      bookGenere: 'islamic',\n      coverPhoto: '',\n      time: 0,\n      location: [],\n      country: user.country,\n      owner: user.username,\n      ownerId: user._id,\n      ownerPhone: user.phone,\n      booksList: JSON.stringify(user.booksList),\n      author: '',\n      year: '',\n      isbn: ''\n    })\n  }, [user])\n\n  function addChange(e) {\n    setaddInfo({ ...addInfo, [e.target.name]: e.target.value })\n  }\n\n  const add = (e) => {\n    e.preventDefault()\n    const formData = new FormData();\n    for (const i in addInfo)\n      formData.append(i, addInfo[i])\n    axios.put(`${process.env.REACT_APP_API_URL}/addNewBook`, formData,\n      {\n        headers: {\n          \"x-access-token\": JSON.parse(localStorage.getItem('token'))?.token\n        }\n      })\n      .then((res) => {\n        let list = user.booksList\n        list.push(res.data)\n        setuser({ ...user, booksList: list })\n        history.goBack()\n      })\n      .catch(err => seterr(err.response.data))\n  }\n\n\n\n\n\n  useLayoutEffect(() => {\n    let theme = localStorage.getItem('theme')\n    document.documentElement.className = theme.toString() === 'themelight' ?\n      classes.themelight : classes.themedark\n  }, [])\n\n\n\n  function GeolocationHandler() {\n    if (navigator.geolocation) {\n      // console.log(navigator.geolocation.getCurrentPosition((position) => {position.coords});\n      navigator.geolocation.getCurrentPosition((position) => {\n        setGeolatitude(position.coords.latitude);\n        setGeolongitude(position.coords.longitude);\n        setaddInfo({ ...addInfo, location: [position.coords.latitude, position.coords.longitude] })\n        setCloseModal(false);\n      });\n    } else alert(\"Geolocation is not supported in your browser\");\n  }\n\n  function clickDropHandler() {\n    setCloseModal(true);\n  }\n\n  return (\n    <>\n      <NavBar />\n\n      <div className={classes.main}>\n\n        {!closeModal === true ? (\n          <Mapp\n            GeoLA={Geolatitude}\n            GeoLO={Geolongitude}\n            onClose={clickDropHandler}\n          />\n        ) : (\n          ''\n        )}\n\n        <form className={classes.container} onSubmit={add}>\n          <h2 className={classes.h2}>Add Book</h2>\n          <div className={classes.bookName__div}>\n            <span className={classes.spans}>Book Name:</span>\n            <input\n              type='text'\n              name='bookName'\n              onChange={addChange}\n              className={`${classes.bookName__input} ${classes.inputs}`}\n              required\n              autoFocus\n            ></input>\n          </div>\n\n          <div className={classes.description__div}>\n            <span className={classes.spans}>Description:</span>\n            <textarea\n              name='description'\n              onChange={addChange}\n              className={`${classes.description__input} ${classes.inputs}`}\n            ></textarea>\n          </div>\n\n          <div className={classes.days__div}>\n            <span className={classes.spans}>\n              Loan time:{' '}\n              <input\n                type='number'\n                min='0'\n                name='time'\n                defaultValue='0'\n                onChange={addChange}\n                className={`${classes.days__input} ${classes.inputs}`}\n                required\n              ></input>{' '}\n              Days{' '}\n            </span>\n          </div>\n\n          <div className={classes.type__div}>\n            <label>\n              <span className={classes.spans}>Book type:</span>\n\n              <select className={`${classes.type__input} ${classes.inputs}`}\n                name='bookGenere'\n                onChange={addChange}\n              >\n                {categoryList.map((book, i) => (\n                  <option key={i} >\n                    {book}\n                  </option>\n                ))}\n              </select>\n            </label>\n          </div>\n\n          <div className={classes.bookName__div}>\n            <span className={classes.spans}>Book Author:</span>\n            <input\n              type='text'\n              name='author'\n              onChange={addChange}\n              className={`${classes.bookName__input} ${classes.inputs}`}\n            ></input>\n          </div>\n\n          <div className={classes.bookName__div}>\n            <span className={classes.spans}>ISBN / Barcode:</span>\n            <input\n              type=\"text\" pattern=\"\\d*\" maxlength=\"13\"\n              name='isbn'\n              onChange={addChange}\n              className={`${classes.bookName__input} ${classes.inputs}`}\n            ></input>\n          </div>\n\n          <div className={classes.bookName__div}>\n            <span className={classes.spans}>Year:</span>\n            <input\n              type=\"text\" pattern=\"\\d*\" maxlength=\"4\"\n              name='year'\n              onChange={addChange}\n              className={`${classes.bookName__input} ${classes.inputs}`}\n            ></input>\n          </div>\n\n\n          <div className={classes.photo__div}>\n            <div>\n              Book Photo :\n              <label className={classes.customfileupload}>\n                Choose Photo\n                <input type='file' name='coverPhoto'\n                  accept='.png, .jpg, .jpeg'\n                  onChange={(e) => {\n                    setaddInfo({ ...addInfo, coverPhoto: e.target.files[0] })\n                  }}\n                />\n              </label>\n              {addInfo.coverPhoto && <span style={{marginLeft:'5vw'}}>saved!</span>}\n            </div>\n          </div>\n\n          <div className={classes.location__div}>\n            <div>\n              <span className={classes.spans}>Your Location:</span>\n              <figure className={classes.mapy}>\n                <img\n                  onClick={GeolocationHandler}\n                  src='/assets/map.png'\n                  alt='map'\n                  height='30'\n                ></img>\n              </figure>\n              {addInfo.location?.length > 0 && <span style={{marginLeft:'5vw'}}>saved!</span>}\n            </div>\n          </div>\n\n          {err && <div className={classes.err}><h5>{err && <img src='/assets/err.svg' alt='error' />}{err}</h5></div>}\n\n\n          <div className={classes.submit__div}>\n            <input\n              type='submit'\n              value='add Book'\n              className={`${classes.submit} ${classes.inputs}`}\n            ></input>\n            <input\n              type='reset'\n              value='cancel'\n              className={`${classes.cancel} ${classes.inputs}`}\n            ></input>\n          </div>\n        </form>\n      </div>\n      <div style={{ margin: 500 }}></div>\n      <Footer />\n    </>\n  );\n}\n\nexport default AddBook;\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}"],"sourceRoot":""}