(this.webpackJsonpbookent=this.webpackJsonpbookent||[]).push([[14],{110:function(e,t,n){!function(e,t){"use strict";function n(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var r=n(t);function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function c(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,o(e,t)}var a=function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=[]),e.length!==t.length||e.some((function(e,n){return!Object.is(e,t[n])}))},s={error:null},l=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).state=s,t.resetErrorBoundary=function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];null==t.props.onReset||(e=t.props).onReset.apply(e,r),t.reset()},t}c(t,e),t.getDerivedStateFromError=function(e){return{error:e}};var n=t.prototype;return n.reset=function(){this.setState(s)},n.componentDidCatch=function(e,t){var n,r;null==(n=(r=this.props).onError)||n.call(r,e,t)},n.componentDidUpdate=function(e,t){var n,r,o=this.state.error,c=this.props.resetKeys;null!==o&&null!==t.error&&a(e.resetKeys,c)&&(null==(n=(r=this.props).onResetKeysChange)||n.call(r,e.resetKeys,c),this.reset())},n.render=function(){var e=this.state.error,t=this.props,n=t.fallbackRender,o=t.FallbackComponent,c=t.fallback;if(null!==e){var a={error:e,resetErrorBoundary:this.resetErrorBoundary};if(r.isValidElement(c))return c;if("function"===typeof n)return n(a);if(o)return r.createElement(o,a);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},t}(r.Component);function i(e,t){var n=function(n){return r.createElement(l,t,r.createElement(e,n))},o=e.displayName||e.name||"Unknown";return n.displayName="withErrorBoundary("+o+")",n}function u(e){var t=r.useState(null),n=t[0],o=t[1];if(null!=e)throw e;if(null!=n)throw n;return o}e.ErrorBoundary=l,e.useErrorHandler=u,e.withErrorBoundary=i,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1))},134:function(e,t,n){"use strict";n.r(t);var r=n(41),o=n(10),c=n(1),a=n.n(c),s=n(25),l=n(13),i=n(110),u=n(26),d=n.n(u),b=n(38),j=n.n(b),h=n(0),f=Object(c.lazy)((function(){return n.e(21).then(n.bind(null,112))})),O=Object(c.lazy)((function(){return Promise.resolve().then(n.bind(null,43))})),p=Object(c.lazy)((function(){return n.e(15).then(n.bind(null,113))})),v=Object(c.lazy)((function(){return n.e(22).then(n.bind(null,114))})),g=a.a.memo((function(e){var t=Object(c.useState)(),n=Object(o.a)(t,2),a=n[0],u=n[1],b=Object(c.useState)(),g=Object(o.a)(b,2),m=g[0],k=g[1],y=Object(c.useState)(),x=Object(o.a)(y,2),S=x[0],E=x[1],N=Object(c.useState)(),w=Object(o.a)(N,2),B=w[0],C=w[1],F=Object(c.useState)(!0),I=Object(o.a)(F,2),_=I[0],z=I[1],L=Object(c.useRef)(),P=Object(c.useState)(!1),R=Object(o.a)(P,2),D=R[0],J=R[1],T=Object(c.useContext)(s.a),K=T.isLogged,A=T.logout,G=T.user,M=T.setuser,U=T.countriesList,V=T.categoryList,q=Object(c.useState)(0),H=Object(o.a)(q,2),Q=H[0],W=H[1],X=Object(c.useState)(0),Y=Object(o.a)(X,2),Z=Y[0],$=Y[1],ee=Object(c.useState)([]),te=Object(o.a)(ee,2),ne=te[0],re=te[1],oe=Object(c.useState)(null),ce=Object(o.a)(oe,2),ae=ce[0],se=ce[1],le=Object(c.useRef)(new IntersectionObserver((function(e){e[0].isIntersecting&&$(Z+1)}),{root:null,rootMargin:"0px",threshold:1}));Object(c.useEffect)((function(){var e=ae,t=le.current;return e&&t.observe(e),function(){e&&t.unobserve(e)}}),[ae]),Object(c.useEffect)((function(){var e;K?(z(!0),d.a.get("".concat("http://localhost:3001","/getBooks?page=").concat(Z),{headers:{"x-access-token":null===(e=JSON.parse(localStorage.getItem("token")))||void 0===e?void 0:e.token}}).then((function(e){z(!1),W(e.data.totalPages),re([].concat(Object(r.a)(ne),Object(r.a)(e.data.books)))})).catch((function(e){return console.log(e)}))):A()}),[Z]),Object(c.useEffect)((function(){a||m||S||(re([]),$(0===Z?"":0),J(!1))}),[a,m,S]);Object(c.useEffect)((function(){var e;(a||m||S)&&(z(!0),d.a.post("".concat("http://localhost:3001","/getSpecificBooks"),{bookName:S||null,bookGenere:m||null,country:a||null},{headers:{"x-access-token":null===(e=JSON.parse(localStorage.getItem("token")))||void 0===e?void 0:e.token}}).then((function(e){z(!1),re(e.data)})).catch((function(e){return console.log(e)})))}),[a,m,S]);function ie(e){k(e),J(!0)}function ue(e){u(e)}Object(c.useLayoutEffect)((function(){var e=localStorage.getItem("theme");document.documentElement.className="themelight"===e.toString()?j.a.themelight:j.a.themedark}),[]);var de=function(e,t){var n,r;e?d.a.put("".concat("http://localhost:3001","/addToFav"),{book:t,user:G},{headers:{"x-access-token":null===(n=JSON.parse(localStorage.getItem("token")))||void 0===n?void 0:n.token}}).then((function(e){return M(e.data)})).catch((function(e){return console.log(e)})):d.a.put("".concat("http://localhost:3001","/removeToFav"),{book:t,user:G},{headers:{"x-access-token":null===(r=JSON.parse(localStorage.getItem("token")))||void 0===r?void 0:r.token}}).then((function(e){return M(e.data)})).catch((function(e){return console.log(e)}))};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(f,{categoryList:V,countriesList:U,setCountry:ue,setGenere:ie}),Object(h.jsxs)("div",{className:j.a.main,children:[Object(h.jsx)(v,{categoryList:V,scrollTohalf:function(){L.current.scrollIntoView({behavior:"smooth",block:"start"})},setGenere:ie}),Object(h.jsxs)("div",{className:j.a.books,ref:L,children:[Object(h.jsx)("div",{children:Object(h.jsx)("h3",{children:"Books"})}),Object(h.jsx)("div",{className:j.a.search,children:Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),J(!0),E(B)},children:[Object(h.jsx)("input",{type:"text",onChange:function(e){C(e.target.value),""===e.target.value&&E("")},placeholder:"search for a book.."}),Object(h.jsx)("input",{type:"submit",value:" "})]})}),Object(h.jsxs)("section",{className:j.a.filters,children:[m&&Object(h.jsxs)("div",{children:[m,Object(h.jsx)("button",{onClick:function(){return k("")},children:Object(h.jsx)("img",{src:"/assets/delete.svg",alt:"del",loading:"lazy"})})]}),a&&Object(h.jsxs)("div",{children:[a,Object(h.jsx)("button",{onClick:function(){return u("")},children:Object(h.jsx)("img",{src:"/assets/delete.svg",alt:"del",loading:"lazy"})})]})]}),Object(h.jsxs)("div",{className:j.a.bookslist,children:[Object(h.jsx)(i.ErrorBoundary,{fallback:Object(h.jsx)("h1",{children:"Error Detected . Try again."}),children:ne.length>0?ne.map((function(e,t){return t===ne.length-1&&!_&&Z<=Q&&!D?Object(h.jsx)("div",{ref:se,id:"lastBook",children:Object(h.jsx)(p,{book:e,addToFav:de})},t):Object(h.jsx)(p,{book:e,addToFav:de},t)})):Object(h.jsx)("center",{style:{position:"absolute",left:"0",right:"0"},children:"No Books Found !"})}),Object(h.jsx)("div",{id:j.a.loader,children:_&&Object(h.jsx)("div",{className:j.a.clones2})})]}),Object(h.jsx)("div",{className:j.a.countries,children:Object(h.jsxs)("select",{onChange:function(e){ue(e.target.value),J(!0)},children:[Object(h.jsx)("option",{value:"",children:"Country :"}),U.map((function(e,t){return Object(h.jsx)("option",{children:e},t)}))]})}),Object(h.jsx)("div",{className:j.a.addsticky,children:Object(h.jsxs)(l.b,{to:"addBook",children:[Object(h.jsx)("p",{children:"Add Book"}),Object(h.jsx)("img",{src:"/assets/add.svg",alt:"add book"})]})})]})]}),Object(h.jsx)("img",{id:j.a.imgsticky,src:"/assets/Polygon 4.svg",alt:"shape"}),Object(h.jsx)(O,{logout:A})]})}));t.default=g}}]);
//# sourceMappingURL=14.aabb0e23.chunk.js.map