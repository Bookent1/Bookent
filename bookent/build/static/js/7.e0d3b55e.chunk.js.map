{"version":3,"sources":["components/editProfile/editForm.module.css","components/editProfile.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"],"names":["module","exports","NavBar","lazy","Footer","EditProfile","history","useHistory","useContext","AuthContext","user","setuser","countriesList","useState","chosedImg","setchosedImg","editUser","seteditUser","err","seterr","useEffect","_id","username","pass","phone","country","profileImg","prevImg","prevUsername","booksList","JSON","stringify","editChange","e","target","name","value","useLayoutEffect","theme","localStorage","getItem","document","documentElement","className","toString","classes","themelight","themedark","main","container","h2","editForm","onSubmit","preventDefault","formData","FormData","i","append","axios","put","process","headers","parse","token","then","res","data","bookslist","goBack","catch","response","choosePicture__div","photoContainer","src","alt","chooseFileContainer","customfileupload","type","accept","onChange","files","URL","createObjectURL","fromInputs__div","input__div","defaultValue","required","input__username","formInputs","minLength","input__password","pattern","maxlength","input__phone","formInputs__SignUp","map","submitButtons__div","submit__btn","cancle__btn","style","margin","_defineProperty","obj","key","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties"],"mappings":"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","file":"static/js/7.e0d3b55e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"themelight\":\"editForm_themelight__3yAjR\",\"themedark\":\"editForm_themedark__34UZj\",\"main\":\"editForm_main__3q8iL\",\"container\":\"editForm_container__21RkD\",\"editForm\":\"editForm_editForm__36d8k\",\"formInputs\":\"editForm_formInputs__1_sLB\",\"choosePicture__div\":\"editForm_choosePicture__div__32R3y\",\"photoContainer\":\"editForm_photoContainer__2DXd0\",\"customfileupload\":\"editForm_customfileupload__1ahvs\",\"chooseFileContainer\":\"editForm_chooseFileContainer__2bj4B\",\"fromInputs__div\":\"editForm_fromInputs__div__26Cpk\",\"input__div\":\"editForm_input__div__3kzsH\",\"input__phone\":\"editForm_input__phone__2pD6x\",\"submitButtons__div\":\"editForm_submitButtons__div__2XzWE\",\"submit__btn\":\"editForm_submit__btn__39Dc1\",\"cancle__btn\":\"editForm_cancle__btn__1ahoI\",\"h2\":\"editForm_h2__2g2c8\",\"err\":\"editForm_err__yR7lu\"};","import React, { useState, useLayoutEffect, useEffect, useContext, lazy } from 'react';\nimport { useHistory } from 'react-router-dom'\nimport { AuthContext } from '../AuthContext'\nimport axios from 'axios'\nimport classes from './editProfile/editForm.module.css';\nconst NavBar = lazy(() => import('./favorites/navBar'))\nconst Footer = lazy(() => import('./home/footer'))\n\n\nfunction EditProfile() {\n  const history = useHistory()\n  const { user, setuser, countriesList } = useContext(AuthContext)\n\n  const [chosedImg, setchosedImg] = useState('')\n  const [editUser, seteditUser] = useState({})\n  const [err, seterr] = useState()\n  useEffect(() => {\n    seteditUser({\n      ...editUser,\n      _id: user._id,\n      username: user.username,\n      pass: '',\n      phone: user.phone,\n      country: user.country,\n      profileImg: user.profileImg,\n      prevImg: user.profileImg,\n      prevUsername: user.username,\n      booksList: JSON.stringify(user.booksList)\n    })\n  }, [user])\n\n\n  const editChange = (e) => {\n    seteditUser({ ...editUser, [e.target.name]: e.target.value })\n  }\n\n  const edit = (e) => {\n    e.preventDefault()\n    const formData = new FormData();\n    for (const i in editUser)\n      formData.append(i, editUser[i])\n    axios.put(`${process.env.REACT_APP_API_URL}/updateUser`, formData,\n      {\n        headers: {\n          \"x-access-token\": JSON.parse(localStorage.getItem('token'))?.token\n        }\n      })\n      .then((res) => {\n        setuser({\n          ...user,\n          username: editUser.username,\n          phone: editUser.phone,\n          country: editUser.country,\n          profileImg: res.data.profileImg,\n          booksList: res.data.bookslist\n        })\n        history.goBack()\n      })\n      .catch(err => seterr(err.response.data))\n  }\n\n\n  useLayoutEffect(() => {\n    let theme = localStorage.getItem('theme')\n    document.documentElement.className = theme.toString() === 'themelight' ?\n      classes.themelight : classes.themedark\n  }, [])\n\n\n  return (\n    <>\n      <NavBar />\n\n      <div className={classes.main}>\n        <div className={classes.container}>\n          <h2 className={classes.h2}>Edit Your Profile</h2>\n\n          <form className={classes.editForm} onSubmit={edit}>\n            <div className={classes.choosePicture__div}>\n              <div className={classes.photoContainer}>\n                <img src={chosedImg || user.profileImg && `${process.env.REACT_APP_API_URL}/usersImages/${user.profileImg}` || '/assets/user.svg'} alt='profile image'></img>\n              </div>\n              <div className={classes.chooseFileContainer}>\n                <label className={classes.customfileupload}>\n                  <input type='file' name=\"profileImg\"\n                    accept='.png, .jpg, .jpeg'\n                    onChange={(e) => {\n                      seteditUser({ ...editUser, profileImg: e.target.files[0] })\n                      setchosedImg(URL.createObjectURL(e.target.files[0]))\n                    }} />\n                  Choose Photo\n                </label>\n              </div>\n              {err &&<div className={classes.err}><h5>{err && <img src='/assets/err.svg' alt='error' />}{err}</h5></div>}\n            </div>\n\n            <div className={classes.fromInputs__div}>\n              <div className={classes.input__div}>\n                <span>Username:</span>\n                <input\n                  type='text'\n                  name='username'\n                  onChange={editChange}\n                  defaultValue={user.username}\n                  required\n                  className={`${classes.input__username} ${classes.formInputs}`}\n                ></input>\n              </div>\n\n              <div className={classes.input__div}>\n                <span>New Password:</span>\n                <input\n                  type='password'\n                  name='pass'\n                  onChange={editChange}\n                  minLength='8'\n                  className={`${classes.input__password} ${classes.formInputs}`}\n                ></input>\n              </div>\n\n              <div className={classes.input__div}>\n                <span>Phone:</span>\n                <input\n                type=\"text\" pattern=\"\\d*\" maxlength=\"10\"\n                name='phone'\n                  onChange={editChange}\n                  defaultValue={user.phone}\n                  required\n                  className={`${classes.input__phone} ${classes.formInputs}`}\n                ></input>\n              </div>\n\n              <div className={classes.input__div}>\n                <span>Country:</span>\n                <select\n                  name='country'\n                  onChange={editChange}\n                  defaultValue={user.country}\n                  className={`${classes.formInputs__SignUp} ${classes.country}`}\n                >\n                  {countriesList.map((country, i) => (\n                    <option value={country} key={i}>{country}</option>\n                  ))}\n                </select>\n              </div>\n\n              <div className={classes.submitButtons__div}>\n                <input\n                  className={classes.submit__btn}\n                  type='submit'\n                  value='update Profile'\n                ></input>\n                <input\n                  className={classes.cancle__btn}\n                  type='reset'\n                  value='Cancel'\n                ></input>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n      <div style={{margin:350}}></div>\n      <Footer />\n    </>\n  );\n}\nexport default EditProfile;\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}"],"sourceRoot":""}